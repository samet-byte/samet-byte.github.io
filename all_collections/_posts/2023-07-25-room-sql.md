---
layout: post
title: Android Room Database with Kotlin
date: 2023-07-25
categories: ["kotlin","SQL","room", "android"]
---

### Implementing the Library and Binding to build.gradle (:app)

```kotlin
android {
    ... //Usual stuff

    buildFeatures{ viewBinding true }
}

dependencies {

    def room_version = "2.5.2" // Verison can be vary depends on the time
    implementation "androidx.room:room-runtime:$room_version"
    annotationProcessor "androidx.room:room-compiler:$room_version"

    ... //Usual Stuff
}
```
___

```kotlin
@Entity(tableName = "my_library")
data class Book(
    val title   : String, 
    val summary : String,
    val year    : Int
){  //4 the sake of simplicity 
    //we only have 3 variables.
    @PrimaryKey(autoGenerate = true)
    val id = 0
}
```

Code defines a data class Book that represents an entity to be stored in an SQLite database using the Room Persistence Library. The Book class has 4 properties: title, summary, page, and id. The id property is marked as the primary key and will be automatically generated by the database when new entities are inserted. The table in the database where Book entities will be stored is named "my_library."

___
```kotlin
interface BookDAO {
    //suspend -> we are going to call the 1st 3 function
    //from coroutine. Ther4 we had2 add 'suspend'.
    
    @Insert suspend fun insert(book: Book)
    @Delete suspend fun delete(book: Book)
    @Update suspend fun update(book: Book)

    @Query("DELETE FROM my_library")
    fun deleteAllBooks()

    @Query("SELECT * FROM MY_LIBRARY ORDER BY year ASC ")
    fun getAllBooks(): LiveData<MutableList<Book>>
}
```
 BookDAO interface provides methods for basic database operations related to the Book entity, such as inserting, deleting, and updating individual Book objects. It also includes a method to delete all books from the table and a method to retrieve all books in ascending order of their <b>"year"</b> property using LiveData.

___